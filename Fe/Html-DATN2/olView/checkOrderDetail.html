<!-- cart + summary -->
<section style="    margin-top: 82px;"  class="bg-light " ng-init="showCheckOrder()">
    
    <div style="display: flex;justify-content: center;">
        <div class="category-container">
          <div class="heading-data__title" id="headingTitle">
            DANH MỤC SẢN PHẨM
          </div>
          <div class="category-body">
            <div class="col-md-4">
              <div class="category-data" id="categoryDataContainer">
                <ul >
                <li ng-repeat="category in dataFill.categoryList">
                  <a ng-href="#!product?categoryId={{category.id}}" class="text-dark">{{category.name}}</a>
                </li>
                </ul>
              </div>
            </div>
            <button class="btn btn-primary" ng-click="goToOfView()" ng-show="isAdmin">Chức năng Admin</button>
          </div>
      
      
          <div class=" d-flex justify-content-start" style="width: 32%;">
            <div style=" border-radius: 10px;    width: 100%;" class="input-group">
              <div class="form-outline">
                <input style="border-bottom: 1px solid #cdcdcd;" type="search" ng-click="openOverlaySearch()" 
                  class="form-control" readonly />
                <label class="form-label">Tìm kiếm sản phẩm</label>
              </div>
              <button type="button" class="btn btn-primary shadow-0" onclick="openOverlay()">
                <i class="fas fa-search fa-lg"></i>
              </button>
      
            </div>
          </div>
        </div>
      </div>
    
      <div class="overlay" id="overlay" class="inactive" ng-click="closeOverlay($event)">
        <div class="header-search">
          <button type="button" class="btn btn-light shadow-0 closeBtn" ng-click="toggleOverlaySearch()">
            <i class="fa-solid fa-xmark fa-lg"></i>
          </button>
          <form class="from-search"  >
            <div class="input-group">
              <div class="form-outline w-100">
              <input style="border-bottom: 1px solid #cdcdcd;" type="search" id="form1" class="form-control"
        ng-model="searchText" ng-change="loadProductSearch()" />
    
    
              </div>
              <button type="button" class="btn btn-primary shadow-0">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </form>
        </div>
        <div class="product-display">
          <div class="container-fluid">
            <div  class="row" id="productDisplay">
            </div>
          </div>
        </div>
      </div>
      
    <div class="container-fluid">
        <div style="margin-bottom: 40px;padding: 46px 64px;" class="row">
        <!-- cart -->
        <div class="col-lg-12">
          <div class="card border shadow-0">
            <div class="m-4">
              <div class="p-4">
                <h5 class="card-title mb-3">Kiểm tra đơn hàng của bạn</h5>
  
                <hr />  
                    <h6  class="card-title mb-3 border:none">Kiểm tra bằng số điện thoại</h6>
                    <form class="form-edit-account ">
                        <div class="input-group mb-3 ">
                            <input type="text" ng-model="phoneNumberCheckOrder" class="form-control" placeholder="Nhập số điện thoại để kiểm tra" aria-label="Số điện thoại" aria-describedby="basic-addon2">
                          
                            <div class="input-group-append" >
                                <button style="padding: 18px;" ng-click="checkOrder()" class="btn btn-primary" type="button">Kiểm tra</button>
                            </div>
                        </div>
                 
                        <p style="color: red;" class="error-message" ng-if="isPhoneNumberCheckOrder">Số điện thoại không hợp lệ.</p>
                    </form>
             
                
             
              
              </div>
              <div class="col-lg-12 col-md-6 col-sm-6 mb-4">
                <div class="column-main">
                    <div class="page-title-wrapper">
                        <h1 class="page-title">
                            <span class="base">Thông tin chi tiết</span>
                        </h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-12">
                            <table class="table">
                                <tr>
                                    <td>
                                        <table class="table">
                                            <tr>
                                                <td>Mã hóa đơn:</td>
                                                <td>{{ selectedBill2.code }}</td>
                                                <td>Trạng thái thanh toán:</td>
                                                <td><strong>{{getStatusText(selectedBill2.status) }}</strong></td>
                                                <td>
                                            </tr>
                                            <tr>
                                                <td>Ngày tạo:</td>
                                                <td>{{ selectedBill2.createdAt | date:'HH:mm - dd/MM/yyyy' }}</td>
                                                <td>Phương thức thanh toán:</td>
                                                <td>{{ selectedBill2.paymentMethod.name }}</td>
                                            </tr>
                                            <tr>
                                                <td>Ngày thanh toán:</td>
                                                <td>{{ selectedBill2.paymentDate | date:' HH:mm - dd/MM/yyyy ' }}</td>
    
                                                <td>Địa chỉ:</td>
                                                <td>{{ selectedBill2.address }}</td>
                                            </tr>
                                            <tr>
                                                <td>Ngày giao hàng:</td>
                                                <td>{{ selectedBill2.deliveryDate | date:'HH:mm - dd/MM/yyyy' }}</td>
                                                <td>Số điện thoại:</td>
                                                <td>{{ selectedBill2.phoneNumber }}</td>
                                            </tr>
                                            <tr>
                                                <td>Phí vận chuyển:</td>
                                                <td>{{ selectedBill2.shippingFee | number}} đ</td>
                                                <td>Mã giảm giá:</td>
                                                <td>{{ selectedBill2.voucher.code }}</td>
                                            </tr>
                                            <tr>
                                                <td>Ghi chú:</td>
                                                <td>{{ selectedBill2.note }}</td>
                                               
                                                    
                                            </tr>
                                          
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Mã hàng</th>
                                        <th>Tên hàng</th>
                                        <th>Số lượng</th>
                                        <th>Đơn giá</th>
                                        <th>Giá bán</th>
                                        <th>Thành tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="detail in selectedBill2.billDetail">
                                        <td>{{ detail.productDetail.product.code }}</td>
                                        <td>{{ detail.productDetail.product.name }}</td>
                                        <td>{{ detail.quantity }}</td>
                                        <td>{{ detail.productDetail.price }}</td>
                                        <td>{{ detail.productDetail.price - detail.discount }}</td>
                                        <td>{{ detail.quantity * (detail.productDetail.price - detail.discount) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                     
                    </div>
                    <div class="row" style="    display: flex;
                    justify-content: flex-end;">
                        <div class="col-md-4">
                            <table class="table">
                                <!-- Thêm một hàng mới hiển thị các thông tin tổng hợp -->
                                <footer>
                                    <tr>
                                        <td><strong>Tổng tiền hàng:</strong></td>
                                        <td class="text-right">{{ (selectedBill2.totalAmount) | number }} đ</td>
                                    </tr> 
                                    <tr>
                                        <td><strong>Giảm giá hóa đơn:</strong></td>
                                        <td class="text-right">{{ selectedBill2.totalAmount - (selectedBill2.totalAmountAfterDiscount)  | number }}  đ</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Khách phải trả:</strong></td>
                                        <td class="text-right">{{ (selectedBill2.totalAmountAfterDiscount + selectedBill2.shippingFee| number)  }} đ</td>
                                    </tr>
                                </footer>
                            </table>
                        </div>
                    </div>
    
                    <div style="justify-content: flex-end;
                    display: flex;"  ng-if="selectedBill2.status === 1 && selectedBill2.paymentMethod.name === 'COD' && role === 'CUSTOMER' ">
                      <button ng-click="updateBillStatus(selectedBill2.id)" class="btn btn-danger">Hủy đơn hàng</button>
                    </div>
                    
                    
                    
                </div>
            </div>
            
            
            </div>
          </div>
        </div>
        <!-- cart -->
        <!-- summary -->
   
      </div>
    </div>
  </section>
  <!-- cart + summary -->